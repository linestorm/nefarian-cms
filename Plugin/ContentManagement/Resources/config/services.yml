parameters:
  nefarian.plugins.content_management.doctrine.node_listener.class:  Nefarian\CmsBundle\Plugin\ContentManagement\Doctrine\EventListener\NodeEventListener

  nefarian.plugins.content_management.form.type.field_collection.class: Nefarian\CmsBundle\Plugin\ContentManagement\Form\Type\FieldCollectionType
  nefarian.plugins.content_management.form.type.field_content_collection.class: Nefarian\CmsBundle\Plugin\ContentManagement\Form\Type\FieldContentCollectionType


services:

  #
  # Doctrine - Map node listener
#  nefarian.plugins.content_management.doctrine.node_listener:
#    class: %nefarian.plugins.content_management.doctrine.node_listener.class%
#    arguments:
#      - @security.context
#    tags:
#      - { name: doctrine.event_subscriber }

  nefarian.plugin.content_management:
    class: Nefarian\CmsBundle\Plugin\ContentManagement\ContentManagementPlugin
    tags:
      - { name: nefarian.plugin }

  #
  # Forms - field collection
  nefarian.plugins.content_management.form.type.field_collection:
    class: %nefarian.plugins.content_management.form.type.field_collection.class%
    arguments:
        - @nefarian_core.content_field_manager
        - @nefarian_core.config_manager
    tags:
        - { name: form.type, alias: field_collection }

  nefarian.plugins.content_management.form.type.field_content_collection:
    class: %nefarian.plugins.content_management.form.type.field_content_collection.class%
    tags:
        - { name: form.type, alias: field_content_collection }



  nefarian.plugins.content_management.event_listener.configuration:
    class: Nefarian\CmsBundle\Plugin\ContentManagement\EventListener\ConfigurationEventSubscriber
    arguments:
      - @nefarian_core.config_manager
      - @doctrine.orm.default_entity_manager
    tags:
        - { name: kernel.event_subscriber }
